# UI 改进需求文档

## 介绍

这是对现有 P2P 区块链 Playground 的用户界面改进，主要解决网络图显示问题、界面重绘性能问题、日志显示问题等，以提供更好的用户体验和性能。

## 需求

### 需求 1

**用户故事：** 作为用户，我希望哈希值验证能够通过浮动窗口显示，以便更直观地查看验证信息。

#### 验收标准

1. WHEN 用户鼠标悬停在哈希值上超过1秒 THEN 系统 SHALL 显示一个浮动的验证窗口
2. WHEN 浮动窗口显示 THEN 系统 SHALL 包含完整的哈希值和验证代码
3. WHEN 用户鼠标离开哈希值区域 THEN 系统 SHALL 隐藏浮动窗口
4. WHEN 用户点击浮动窗口内的复制按钮 THEN 系统 SHALL 成功复制验证代码到剪贴板

### 需求 2

**用户故事：** 作为用户，我希望验证代码的复制功能能够正常工作，以便我可以在控制台中运行验证。

#### 验收标准

1. WHEN 用户点击"复制代码"按钮 THEN 系统 SHALL 成功将验证代码复制到剪贴板
2. WHEN 用户点击"复制到剪贴板"按钮 THEN 系统 SHALL 成功将控制台代码复制到剪贴板
3. WHEN 复制操作完成 THEN 系统 SHALL 显示复制成功的反馈信息
4. WHEN 复制操作失败 THEN 系统 SHALL 显示错误信息并提供备选方案

### 需求 3

**用户故事：** 作为用户，我希望看到正确的 SHA256 哈希值，以便验证数据的完整性。

#### 验收标准

1. WHEN 系统生成哈希值 THEN 系统 SHALL 确保使用正确的 SHA256 算法
2. WHEN 显示哈希值 THEN 系统 SHALL 显示完整的64字符十六进制字符串
3. WHEN 哈希值过短或格式不正确 THEN 系统 SHALL 重新计算或显示错误信息
4. WHEN 验证哈希值 THEN 系统 SHALL 提供原始数据和计算过程的详细信息

### 需求 4

**用户故事：** 作为用户，我希望主面板的布局更加合理，以便更好地查看网络状态和用户信息。

#### 验收标准

1. WHEN 显示主面板 THEN 系统 SHALL 将用户区域放置在 P2P 网络图的下方
2. WHEN 显示网络图 THEN 系统 SHALL 移除网络图上方所有占用高度的 DOM 元素
3. WHEN 调整网络图 THEN 系统 SHALL 将网络图宽度扩展到 100%
4. WHEN 重新设计布局 THEN 系统 SHALL 确保所有内容在不同屏幕尺寸下都能正常显示

### 需求 5

**用户故事：** 作为用户，我希望网络图能够显示所有节点，以便完整了解网络拓扑。

#### 验收标准

1. WHEN 显示网络图 THEN 系统 SHALL 显示所有配置的网络节点
2. WHEN 节点数量较多 THEN 系统 SHALL 使用适当的布局算法确保所有节点都可见
3. WHEN 节点连接发生变化 THEN 系统 SHALL 实时更新网络图中的连接状态
4. WHEN 网络图空间不足 THEN 系统 SHALL 提供缩放或滚动功能以查看所有节点

### 需求 6

**用户故事：** 作为用户，我希望网络图能够正确显示节点之间的连接，以便了解完整的网络拓扑结构。

#### 验收标准

1. WHEN 系统启动后 THEN 网络图 SHALL 显示所有节点和它们之间的连接线（边）
2. WHEN 节点建立连接 THEN 系统 SHALL 在网络图中绘制连接线
3. WHEN 连接断开 THEN 系统 SHALL 从网络图中移除对应的连接线
4. WHEN 网络状态变化 THEN 系统 SHALL 只更新变化的连接，而不是重绘整个网络图

### 需求 7

**用户故事：** 作为用户，我希望界面更新时只重绘发生变化的部分，以便获得更好的性能和用户体验。

#### 验收标准

1. WHEN 用户状态发生变化 THEN 系统 SHALL 只更新该用户的显示区域
2. WHEN 区块链状态发生变化 THEN 系统 SHALL 只更新该区块链的显示区域
3. WHEN 网络连接状态变化 THEN 系统 SHALL 只更新相关的连接线，不重绘整个网络图
4. WHEN 数据更新 THEN 系统 SHALL 避免全局重绘，使用增量更新策略

### 需求 8

**用户故事：** 作为用户，我希望日志按照时间顺序正确排列，以便追踪事件的发生顺序。

#### 验收标准

1. WHEN 新日志产生 THEN 系统 SHALL 将新日志添加到日志列表的底部
2. WHEN 显示日志列表 THEN 系统 SHALL 按照时间顺序从上到下排列（最早的在上面，最新的在下面）
3. WHEN 日志列表更新 THEN 系统 SHALL 自动滚动到最新的日志条目
4. WHEN 用户手动滚动日志 THEN 系统 SHALL 暂停自动滚动功能

### 需求 9

**用户故事：** 作为用户，我希望日志的显示更加紧凑和易读，以便在有限的空间内查看更多信息。

#### 验收标准

1. WHEN 显示日志条目 THEN 系统 SHALL 将时间戳与日志消息显示在同一行
2. WHEN 设置日志背景色 THEN 系统 SHALL 使用较浅的背景色以提高可读性
3. WHEN 显示日志时间 THEN 系统 SHALL 使用紧凑的时间格式，不占用独立行
4. WHEN 日志条目过多 THEN 系统 SHALL 减少每条日志的垂直高度以显示更多内容

### 需求 10

**用户故事：** 作为用户，我希望界面响应更加流畅，以便获得更好的交互体验。

#### 验收标准

1. WHEN 用户进行界面交互 THEN 系统 SHALL 在200毫秒内响应用户操作
2. WHEN 显示浮动窗口 THEN 系统 SHALL 使用平滑的动画过渡效果
3. WHEN 更新网络图 THEN 系统 SHALL 使用增量更新而非完全重绘
4. WHEN 处理大量数据 THEN 系统 SHALL 使用虚拟化技术保持界面流畅性